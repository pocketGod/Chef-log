<div class="page container">
  <h1 class="page__title">Events <span class="badge">overview</span></h1>

  <div class="event-list__toolbar">
    <button class="btn btn-primary" (click)="create()">➕ Create Event</button>
  </div>

  @if (events$ | async; as events) {
    @if (events.length > 0) {
      <ul class="event-list">
        @for (e of events; track e.id) {
          <li class="event-card card">
            <div class="event-card__header">
              <div class="event-card__titleRow">
                <h3 class="event-card__title">{{ e.name }}</h3>
                <small class="event-card__date">{{ e.createdAt | date: 'medium' }}</small>
              </div>

              <div class="event-card__actions">
                <a class="btn btn-ghost" [routerLink]="['/events', e.id]">Open</a>
                <button class="btn" (click)="remove(e.id!)">Delete</button>
              </div>
            </div>

            <div class="event-card__segments" *ngIf="e.segments?.length">
              <span class="muted">Segments:</span>
              <div class="segments">
                @for (s of e.segments; track s.key) {
                  <span class="segment"
                        [ngClass]="'segment--' + s.key">
                    <span class="segment__key">{{ s.key }}</span>
                    <span class="segment__count">{{ s.guests }}</span>
                  </span>
                }
              </div>
            </div>
          </li>
        }
      </ul>
    } @else {
      <p class="muted">No events yet. Click “Create Event”.</p>
    }
  }
</div>
