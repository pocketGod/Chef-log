<div class="page container">
  <h1 class="page__title">
  {{ 'events.title' | localize }}
  <span class="badge">{{ 'events.badge.overview' | localize }}</span>
</h1>

  <div class="event-list__toolbar">
    <button class="btn btn-primary" (click)="create()">
    {{ 'events.create' | localize }}
  </button>
  </div>

  @if (events$ | async; as events) { @if (events.length > 0) {
  <ul class="event-list">
    @for (e of events; track e.id) {
    <li class="event-card card">
      <div class="event-card__header">
        <div class="event-card__titleRow">
          <h3 class="event-card__title">{{ e.name }}</h3>
          <small class="event-card__date">{{ e.createdAt | date : 'medium' }}</small>
        </div>

        <div class="event-card__actions">
          <a class="btn btn-ghost" [routerLink]="['/events', e.id]">{{ 'event.card.open' | localize }}</a>
          <button class="btn" (click)="remove(e.id!)">{{ 'event.card.delete' | localize }}</button>
        </div>
      </div>

      <div class="event-card__segments" *ngIf="e.segments?.length">
        <span class="muted">{{ 'event.card.segments' | localize }}</span>
        <div class="segments">
          @for (s of e.segments; track s.key) {
          <span class="segment" [ngClass]="'segment--' + s.key">
            <span class="segment__key">{{ ('segment.' + s.key) | localize }}</span>
            <span class="segment__count">{{ s.guests }}</span>
          </span>
          }
        </div>
      </div>
    </li>
    }
  </ul>
  } @else {
  <app-loader class="editor__loader"></app-loader>
  } }
</div>
